{"version":3,"names":["allowedGlobalAttributes","elementToComponentAndObserverOptionsMap","Map","mutationObserver","updateGlobalAttributes","component","attributeFilter","reuseAttributes","el","updatedAttributes","globalAttributes","filter","attr","includes","hasAttribute","forEach","value","getAttribute","processMutations","mutations","target","options","get","watchGlobalAttributes","observerOptions","set","createObserver","observe","unwatchGlobalAttributes","delete","takeRecords","disconnect","element","entries","menuCss","CalciteMenu","constructor","hostRef","this","menuItems","handleMenuSlotChange","event","slotChangeGetAssignedElements","setMenuItemLayout","layout","label","undefined","messageOverrides","messages","defaultMessages","effectiveLocale","role","handleLayoutChange","onMessagesChange","effectiveLocaleChange","updateMessages","connectedCallback","connectLocalized","connectMessages","async","setUpLoadableComponent","setUpMessages","componentDidLoad","setComponentLoaded","disconnectedCallback","disconnectLocalized","disconnectMessages","componentLoaded","focus","calciteInternalNavMenuItemKeyEvent","submenuItems","detail","children","key","stopPropagation","focusElementInGroup","isSubmenuOpen","setFocus","length","focusParentElement","preventDefault","parentEl","parentElement","focusElement","open","items","item","isTopLevelItem","topLevelMenuLayout","render","h","Host","Object","assign","onSlotchange","delegatesFocus","assetsDirs"],"sources":["./node_modules/@esri/calcite-components/dist/collection/utils/globalAttributes.js","./node_modules/@esri/calcite-components/dist/collection/components/menu/menu.css?tag=calcite-menu&encapsulation=shadow","./node_modules/@esri/calcite-components/dist/collection/components/menu/menu.js"],"sourcesContent":["/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.\n * v1.4.2\n */\nimport { createObserver } from \"./observers\";\nconst allowedGlobalAttributes = [\"lang\", \"role\"];\nconst elementToComponentAndObserverOptionsMap = new Map();\nlet mutationObserver;\nfunction updateGlobalAttributes(component, attributeFilter, reuseAttributes = false) {\n  const { el } = component;\n  const updatedAttributes = reuseAttributes ? component.globalAttributes : {};\n  attributeFilter\n    .filter((attr) => !!allowedGlobalAttributes.includes(attr) && !!el.hasAttribute(attr))\n    .forEach((attr) => {\n    const value = el.getAttribute(attr);\n    if (value !== null) {\n      updatedAttributes[attr] = value;\n    }\n  });\n  component.globalAttributes = updatedAttributes;\n}\nfunction processMutations(mutations) {\n  mutations.forEach(({ target }) => {\n    const [component, options] = elementToComponentAndObserverOptionsMap.get(target);\n    updateGlobalAttributes(component, options.attributeFilter);\n  });\n}\n/**\n * Helper to set up listening for changes to global attributes.\n *\n * render(): VNode {\n * return (<Host>\n * <ul {...this.globalAttributes}></div>\n * </Host>);\n * }\n *\n * @param component\n * @param attributeFilter\n */\nexport function watchGlobalAttributes(component, attributeFilter) {\n  const { el } = component;\n  const observerOptions = { attributeFilter };\n  elementToComponentAndObserverOptionsMap.set(el, [component, observerOptions]);\n  updateGlobalAttributes(component, attributeFilter, true);\n  if (!mutationObserver) {\n    mutationObserver = createObserver(\"mutation\", processMutations);\n  }\n  mutationObserver.observe(el, observerOptions);\n}\n/**\n * Helper remove listening for changes to inherited attributes.\n *\n * @param component\n */\nexport function unwatchGlobalAttributes(component) {\n  elementToComponentAndObserverOptionsMap.delete(component.el);\n  // we explicitly process queued mutations and disconnect and reconnect\n  // the observer until MutationObserver gets an `unobserve` method\n  // see https://github.com/whatwg/dom/issues/126\n  processMutations(mutationObserver.takeRecords());\n  mutationObserver.disconnect();\n  for (const [element, [, observerOptions]] of elementToComponentAndObserverOptionsMap.entries()) {\n    mutationObserver.observe(element, observerOptions);\n  }\n}\n","/* mixins & extensions */\n@keyframes in {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n@keyframes in-down {\n  0% {\n    opacity: 0;\n    transform: translate3D(0, -5px, 0);\n  }\n  100% {\n    opacity: 1;\n    transform: translate3D(0, 0, 0);\n  }\n}\n@keyframes in-up {\n  0% {\n    opacity: 0;\n    transform: translate3D(0, 5px, 0);\n  }\n  100% {\n    opacity: 1;\n    transform: translate3D(0, 0, 0);\n  }\n}\n@keyframes in-right {\n  0% {\n    opacity: 0;\n    transform: translate3D(-5px, 0, 0);\n  }\n  100% {\n    opacity: 1;\n    transform: translate3D(0, 0, 0);\n  }\n}\n@keyframes in-left {\n  0% {\n    opacity: 0;\n    transform: translate3D(5px, 0, 0);\n  }\n  100% {\n    opacity: 1;\n    transform: translate3D(0, 0, 0);\n  }\n}\n@keyframes in-scale {\n  0% {\n    opacity: 0;\n    transform: scale3D(0.95, 0.95, 1);\n  }\n  100% {\n    opacity: 1;\n    transform: scale3D(1, 1, 1);\n  }\n}\n:root {\n  --calcite-animation-timing: calc(150ms * var(--calcite-internal-duration-factor));\n  --calcite-internal-duration-factor: var(--calcite-duration-factor, 1);\n  --calcite-internal-animation-timing-fast: calc(100ms * var(--calcite-internal-duration-factor));\n  --calcite-internal-animation-timing-medium: calc(200ms * var(--calcite-internal-duration-factor));\n  --calcite-internal-animation-timing-slow: calc(300ms * var(--calcite-internal-duration-factor));\n}\n\n.calcite-animate {\n  opacity: 0;\n  animation-fill-mode: both;\n  animation-duration: var(--calcite-animation-timing);\n}\n\n.calcite-animate__in {\n  animation-name: in;\n}\n\n.calcite-animate__in-down {\n  animation-name: in-down;\n}\n\n.calcite-animate__in-up {\n  animation-name: in-up;\n}\n\n.calcite-animate__in-right {\n  animation-name: in-right;\n}\n\n.calcite-animate__in-left {\n  animation-name: in-left;\n}\n\n.calcite-animate__in-scale {\n  animation-name: in-scale;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  :root {\n    --calcite-internal-duration-factor: 0.01;\n  }\n}\n/* helper to properly scale internal durations */\n/**\n* Currently only used in Checkbox.\n*/\n:root {\n  --calcite-floating-ui-transition: var(--calcite-animation-timing);\n  --calcite-floating-ui-z-index: var(--calcite-app-z-index-dropdown);\n}\n\n:host([hidden]) {\n  display: none;\n}\n\n:host {\n  display: flex;\n}\n\nul {\n  margin: 0px;\n  display: inline-flex;\n  block-size: 100%;\n  align-items: center;\n  padding: 0px;\n}\n\n:host([layout=vertical]) ul {\n  display: flex;\n  inline-size: 100%;\n  flex-direction: column;\n}","/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.\n * v1.4.2\n */\nimport { h, Host } from \"@stencil/core\";\nimport { focusElement, focusElementInGroup, slotChangeGetAssignedElements } from \"../../utils/dom\";\nimport { componentLoaded, setComponentLoaded, setUpLoadableComponent } from \"../../utils/loadable\";\nimport { connectLocalized, disconnectLocalized } from \"../../utils/locale\";\nimport { connectMessages, disconnectMessages, setUpMessages, updateMessages } from \"../../utils/t9n\";\nimport { unwatchGlobalAttributes, watchGlobalAttributes } from \"../../utils/globalAttributes\";\nexport class CalciteMenu {\n  constructor() {\n    this.menuItems = [];\n    //--------------------------------------------------------------------------\n    //\n    //  Private Methods\n    //\n    //--------------------------------------------------------------------------\n    this.handleMenuSlotChange = (event) => {\n      this.menuItems = slotChangeGetAssignedElements(event);\n      this.setMenuItemLayout(this.menuItems, this.layout);\n    };\n    this.label = undefined;\n    this.layout = \"horizontal\";\n    this.messageOverrides = undefined;\n    this.messages = undefined;\n    this.defaultMessages = undefined;\n    this.effectiveLocale = \"\";\n    this.globalAttributes = {\n      role: \"menubar\"\n    };\n  }\n  handleLayoutChange(value) {\n    this.setMenuItemLayout(this.menuItems, value);\n  }\n  onMessagesChange() {\n    /* wired up by t9n util */\n  }\n  effectiveLocaleChange() {\n    updateMessages(this, this.effectiveLocale);\n  }\n  //--------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  //--------------------------------------------------------------------------\n  connectedCallback() {\n    connectLocalized(this);\n    connectMessages(this);\n    watchGlobalAttributes(this, [\"role\"]);\n  }\n  async componentWillLoad() {\n    setUpLoadableComponent(this);\n    await setUpMessages(this);\n  }\n  componentDidLoad() {\n    setComponentLoaded(this);\n  }\n  disconnectedCallback() {\n    disconnectLocalized(this);\n    disconnectMessages(this);\n    unwatchGlobalAttributes(this);\n  }\n  //--------------------------------------------------------------------------\n  //\n  //  Public Methods\n  //\n  //--------------------------------------------------------------------------\n  /** Sets focus on the component's first focusable element. */\n  async setFocus() {\n    await componentLoaded(this);\n    this.el.focus();\n  }\n  //--------------------------------------------------------------------------\n  //\n  //  Event Listeners\n  //\n  //--------------------------------------------------------------------------\n  calciteInternalNavMenuItemKeyEvent(event) {\n    const target = event.target;\n    const submenuItems = event.detail.children;\n    const key = event.detail.event.key;\n    event.stopPropagation();\n    if (key === \"ArrowDown\") {\n      if (target.layout === \"vertical\") {\n        focusElementInGroup(this.menuItems, target, \"next\", false);\n      }\n      else {\n        if (event.detail.isSubmenuOpen) {\n          submenuItems[0].setFocus();\n        }\n      }\n    }\n    else if (key === \"ArrowUp\") {\n      if (this.layout === \"vertical\") {\n        focusElementInGroup(this.menuItems, target, \"previous\", false);\n      }\n      else {\n        if (event.detail.isSubmenuOpen) {\n          submenuItems[submenuItems.length - 1].setFocus();\n        }\n      }\n    }\n    else if (key === \"ArrowRight\") {\n      if (this.layout === \"horizontal\") {\n        focusElementInGroup(this.menuItems, target, \"next\", false);\n      }\n      else {\n        if (event.detail.isSubmenuOpen) {\n          submenuItems[0].setFocus();\n        }\n      }\n    }\n    else if (key === \"ArrowLeft\") {\n      if (this.layout === \"horizontal\") {\n        focusElementInGroup(this.menuItems, target, \"previous\", false);\n      }\n      else {\n        if (event.detail.isSubmenuOpen) {\n          this.focusParentElement(event.target);\n        }\n      }\n    }\n    else if (key === \"Escape\") {\n      this.focusParentElement(event.target);\n    }\n    event.preventDefault();\n  }\n  focusParentElement(el) {\n    const parentEl = el.parentElement;\n    if (parentEl) {\n      focusElement(parentEl);\n      parentEl.open = false;\n    }\n  }\n  setMenuItemLayout(items, layout) {\n    items.forEach((item) => {\n      item.layout = layout;\n      if (this.globalAttributes.role === \"menubar\") {\n        item.isTopLevelItem = true;\n        item.topLevelMenuLayout = this.layout;\n      }\n    });\n  }\n  // --------------------------------------------------------------------------\n  //\n  //  Render Methods\n  //\n  // --------------------------------------------------------------------------\n  render() {\n    return (h(Host, null, h(\"ul\", { \"aria-label\": this.label, ...this.globalAttributes }, h(\"slot\", { onSlotchange: this.handleMenuSlotChange }))));\n  }\n  static get is() { return \"calcite-menu\"; }\n  static get encapsulation() { return \"shadow\"; }\n  static get delegatesFocus() { return true; }\n  static get originalStyleUrls() {\n    return {\n      \"$\": [\"menu.scss\"]\n    };\n  }\n  static get styleUrls() {\n    return {\n      \"$\": [\"menu.css\"]\n    };\n  }\n  static get assetsDirs() { return [\"assets\"]; }\n  static get properties() {\n    return {\n      \"label\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"string\",\n          \"resolved\": \"string\",\n          \"references\": {}\n        },\n        \"required\": true,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Accessible name for the component.\"\n        },\n        \"attribute\": \"label\",\n        \"reflect\": false\n      },\n      \"layout\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"Layout\",\n          \"resolved\": \"\\\"horizontal\\\" | \\\"vertical\\\"\",\n          \"references\": {\n            \"Layout\": {\n              \"location\": \"global\"\n            }\n          }\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Specifies the layout of the component.\"\n        },\n        \"attribute\": \"layout\",\n        \"reflect\": true,\n        \"defaultValue\": \"\\\"horizontal\\\"\"\n      },\n      \"messageOverrides\": {\n        \"type\": \"unknown\",\n        \"mutable\": true,\n        \"complexType\": {\n          \"original\": \"Partial<MenuMessages>\",\n          \"resolved\": \"{ more?: string; }\",\n          \"references\": {\n            \"Partial\": {\n              \"location\": \"global\"\n            },\n            \"MenuMessages\": {\n              \"location\": \"import\",\n              \"path\": \"./assets/menu/t9n\"\n            }\n          }\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Use this property to override individual strings used by the component.\"\n        }\n      },\n      \"messages\": {\n        \"type\": \"unknown\",\n        \"mutable\": true,\n        \"complexType\": {\n          \"original\": \"MenuMessages\",\n          \"resolved\": \"{ more: string; }\",\n          \"references\": {\n            \"MenuMessages\": {\n              \"location\": \"import\",\n              \"path\": \"./assets/menu/t9n\"\n            }\n          }\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [{\n              \"name\": \"internal\",\n              \"text\": undefined\n            }],\n          \"text\": \"Made into a prop for testing purposes only.\"\n        }\n      }\n    };\n  }\n  static get states() {\n    return {\n      \"defaultMessages\": {},\n      \"effectiveLocale\": {},\n      \"globalAttributes\": {}\n    };\n  }\n  static get methods() {\n    return {\n      \"setFocus\": {\n        \"complexType\": {\n          \"signature\": \"() => Promise<void>\",\n          \"parameters\": [],\n          \"references\": {\n            \"Promise\": {\n              \"location\": \"global\"\n            }\n          },\n          \"return\": \"Promise<void>\"\n        },\n        \"docs\": {\n          \"text\": \"Sets focus on the component's first focusable element.\",\n          \"tags\": []\n        }\n      }\n    };\n  }\n  static get elementRef() { return \"el\"; }\n  static get watchers() {\n    return [{\n        \"propName\": \"layout\",\n        \"methodName\": \"handleLayoutChange\"\n      }, {\n        \"propName\": \"messageOverrides\",\n        \"methodName\": \"onMessagesChange\"\n      }, {\n        \"propName\": \"effectiveLocale\",\n        \"methodName\": \"effectiveLocaleChange\"\n      }];\n  }\n  static get listeners() {\n    return [{\n        \"name\": \"calciteInternalMenuItemKeyEvent\",\n        \"method\": \"calciteInternalNavMenuItemKeyEvent\",\n        \"target\": undefined,\n        \"capture\": false,\n        \"passive\": false\n      }];\n  }\n}\n"],"mappings":"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"}