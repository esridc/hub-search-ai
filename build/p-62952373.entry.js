import{r as t,c as i,h as s,g as e}from"./p-29cdcf48.js";import{c as n,C as a,D as o,a as l,H as c,O as r,b as h,R as d}from"./p-26527790.js";import{i as u,b as p}from"./p-2752c00d.js";import{C as f,n as m,h as g,o as v,a as b,b as w,p as x,c as y,t as C,d as k,e as D,f as S}from"./p-3af43ef5.js";import{u as A}from"./p-f53bba85.js";import{i as $}from"./p-7fc09c90.js";import{c as j,a as z,s as F}from"./p-49bfd61d.js";import{c as _,d as L}from"./p-9d22fb54.js";import{c as O}from"./p-6bf1dc23.js";import{u as M,s as I,c as K,d as P}from"./p-97b95874.js";import{t as E}from"./p-7cf0703a.js";import"./p-b68038b5.js";import"./p-7d251f50.js";import"./p-7865f4b5.js";import"./p-8725476e.js";import"./p-58421494.js";const N='@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-right{0%{opacity:0;transform:translate3D(-5px, 0, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-left{0%{opacity:0;transform:translate3D(5px, 0, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-right{animation-name:in-right}.calcite-animate__in-left{animation-name:in-left}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0.01}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:var(--calcite-app-z-index-dropdown)}:host([hidden]){display:none}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([scale=s]){--calcite-color-picker-spacing:8px}:host([scale=s]) .container{inline-size:160px}:host([scale=s]) .saved-colors{gap:0.25rem;grid-template-columns:repeat(auto-fill, 20px)}:host([scale=m]){--calcite-color-picker-spacing:12px}:host([scale=m]) .container{inline-size:272px}:host([scale=l]){--calcite-color-picker-spacing:16px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]) .container{inline-size:464px}:host([scale=l]) .section:first-of-type{padding-block-start:var(--calcite-color-picker-spacing)}:host([scale=l]) .saved-colors{grid-template-columns:repeat(auto-fill, 32px)}:host([scale=l]) .control-section{flex-wrap:nowrap;align-items:baseline;flex-wrap:wrap}:host([scale=l]) .color-hex-options{display:flex;flex-shrink:1;flex-direction:column;justify-content:space-around}:host([scale=l]) .color-mode-container{flex-shrink:3}.container{background-color:var(--calcite-ui-foreground-1);display:inline-block;border:1px solid var(--calcite-ui-border-1)}.control-and-scope{position:relative;display:flex;cursor:pointer;touch-action:none}.scope{position:absolute;z-index:var(--calcite-app-z-index);font-size:var(--calcite-font-size--1);outline-color:transparent}.scope:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-ui-brand));outline-offset:calc(\n            2px *\n            calc(\n              1 -\n              2 * clamp(\n                0,\n                var(--calcite-ui-focus-offset-invert),\n                1\n              )\n            )\n          );outline-offset:16px}.hex-and-channels-group{inline-size:100%}.hex-and-channels-group,.control-section{display:flex;flex-direction:row;flex-wrap:wrap}.section{padding-block:0 var(--calcite-color-picker-spacing);padding-inline:var(--calcite-color-picker-spacing)}.section:first-of-type{padding-block-start:var(--calcite-color-picker-spacing)}.sliders{display:flex;flex-direction:column;justify-content:space-between;margin-inline-start:var(--calcite-color-picker-spacing)}.preview-and-sliders{display:flex;align-items:center;padding:var(--calcite-color-picker-spacing)}.color-hex-options,.section--split{flex-grow:1}.header{display:flex;align-items:center;justify-content:space-between;color:var(--calcite-ui-text-1)}.color-mode-container{padding-block-start:var(--calcite-color-picker-spacing)}.channels{display:flex;row-gap:0.125rem}.channel[data-channel-index="3"]{inline-size:159px}:host([scale=s]) .channels{flex-wrap:wrap}:host([scale=s]) .channel{flex-basis:30%;flex-grow:1}:host([scale=s]) .channel[data-channel-index="3"]{inline-size:unset;margin-inline-start:unset}:host([scale=l]) .channel[data-channel-index="3"]{inline-size:131px}.saved-colors{display:grid;gap:0.5rem;padding-block-start:var(--calcite-color-picker-spacing);grid-template-columns:repeat(auto-fill, 24px)}.saved-colors-buttons{display:flex}.saved-color{outline-offset:0;outline-color:transparent;cursor:pointer}.saved-color:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}.saved-color:hover{transition:outline-color var(--calcite-internal-animation-timing-fast) ease-in-out;outline:2px solid var(--calcite-ui-border-2);outline-offset:2px}';const U=16;const H=class{constructor(e){t(this,e);this.calciteColorPickerChange=i(this,"calciteColorPickerChange",6);this.calciteColorPickerInput=i(this,"calciteColorPickerInput",6);this.internalColorUpdateContext=null;this.mode=f.HEX;this.shiftKeyChannelAdjustment=0;this.handleTabActivate=t=>{this.channelMode=t.currentTarget.getAttribute("data-color-mode");this.updateChannelsFromColor(this.color)};this.handleColorFieldScopeKeyDown=t=>{const{key:i}=t;const s={ArrowUp:{x:0,y:-10},ArrowRight:{x:10,y:0},ArrowDown:{x:0,y:10},ArrowLeft:{x:-10,y:0}};if(s[i]){t.preventDefault();this.scopeOrientation=i==="ArrowDown"||i==="ArrowUp"?"vertical":"horizontal";this.captureColorFieldColor(this.colorFieldScopeLeft+s[i].x||0,this.colorFieldScopeTop+s[i].y||0,false)}};this.handleHueScopeKeyDown=t=>{const i=t.shiftKey?10:1;const{key:s}=t;const e={ArrowUp:1,ArrowRight:1,ArrowDown:-1,ArrowLeft:-1};if(e[s]){t.preventDefault();const n=e[s]*i;const a=this.baseColorFieldColor.hue();const o=this.baseColorFieldColor.hue(a+n);this.internalColorSet(o,false)}};this.handleHexInputChange=t=>{t.stopPropagation();const{allowEmpty:i,color:s}=this;const e=t.target;const a=e.value;if(i&&!a){this.internalColorSet(null);return}const o=s&&m(g(s,w(this.mode)));if(a!==o){this.internalColorSet(n(a))}};this.handleSavedColorSelect=t=>{const i=t.currentTarget;this.internalColorSet(n(i.color))};this.handleChannelInput=t=>{const i=t.currentTarget;const s=Number(i.getAttribute("data-channel-index"));const e=s===3;const n=e?r.max:this.channelMode==="rgb"?d[Object.keys(d)[s]]:c[Object.keys(c)[s]];let a;if(this.allowEmpty&&!i.value){a=""}else{const t=Number(i.value);const s=t+this.shiftKeyChannelAdjustment;const e=O(s,0,n);a=e.toString()}i.value=a;i.internalSyncChildElValue()};this.handleChannelChange=t=>{const i=t.currentTarget;const s=Number(i.getAttribute("data-channel-index"));const e=[...this.channels];const n=this.allowEmpty&&!i.value;if(n){this.channels=[null,null,null,null];this.internalColorSet(null);return}const a=s===3;const o=Number(i.value);e[s]=a?v(o):o;this.updateColorFromChannels(e)};this.handleSavedColorKeyDown=t=>{if($(t.key)){t.preventDefault();this.handleSavedColorSelect(t)}};this.handleColorFieldPointerDown=t=>{if(!u(t)){return}const{offsetX:i,offsetY:s}=t;document.addEventListener("pointermove",this.globalPointerMoveHandler);document.addEventListener("pointerup",this.globalPointerUpHandler,{once:true});this.activeCanvasInfo={context:this.colorFieldRenderingContext,bounds:this.colorFieldRenderingContext.canvas.getBoundingClientRect()};this.captureColorFieldColor(i,s);this.colorFieldScopeNode.focus()};this.handleHueSliderPointerDown=t=>{if(!u(t)){return}const{offsetX:i}=t;document.addEventListener("pointermove",this.globalPointerMoveHandler);document.addEventListener("pointerup",this.globalPointerUpHandler,{once:true});this.activeCanvasInfo={context:this.hueSliderRenderingContext,bounds:this.hueSliderRenderingContext.canvas.getBoundingClientRect()};this.captureHueSliderColor(i);this.hueScopeNode.focus()};this.handleOpacitySliderPointerDown=t=>{if(!u(t)){return}const{offsetX:i}=t;document.addEventListener("pointermove",this.globalPointerMoveHandler);document.addEventListener("pointerup",this.globalPointerUpHandler,{once:true});this.activeCanvasInfo={context:this.opacitySliderRenderingContext,bounds:this.opacitySliderRenderingContext.canvas.getBoundingClientRect()};this.captureOpacitySliderValue(i);this.opacityScopeNode.focus()};this.globalPointerUpHandler=t=>{if(!u(t)){return}const i=this.activeCanvasInfo;this.activeCanvasInfo=null;this.drawColorControls();if(i){this.calciteColorPickerChange.emit()}};this.globalPointerMoveHandler=t=>{const{activeCanvasInfo:i,el:s}=this;if(!s.isConnected||!i){return}const{context:e,bounds:n}=i;let a;let o;const{clientX:l,clientY:c}=t;if(e.canvas.matches(":hover")){a=l-n.x;o=c-n.y}else{if(l<n.x+n.width&&l>n.x){a=l-n.x}else if(l<n.x){a=0}else{a=n.width-1}if(c<n.y+n.height&&c>n.y){o=c-n.y}else if(c<n.y){o=0}else{o=n.height}}if(e===this.colorFieldRenderingContext){this.captureColorFieldColor(a,o,false)}else if(e===this.hueSliderRenderingContext){this.captureHueSliderColor(a)}else if(e===this.opacitySliderRenderingContext){this.captureOpacitySliderValue(a)}};this.storeColorFieldScope=t=>{this.colorFieldScopeNode=t};this.storeHueScope=t=>{this.hueScopeNode=t};this.renderChannelsTabTitle=t=>{const{channelMode:i,messages:e}=this;const n=t===i;const o=t==="rgb"?e.rgb:e.hsv;return s("calcite-tab-title",{class:a.colorMode,"data-color-mode":t,key:t,onCalciteTabsActivate:this.handleTabActivate,selected:n},o)};this.renderChannelsTab=t=>{const{allowEmpty:i,channelMode:e,channels:n,messages:o,alphaChannel:l}=this;const c=t===e;const r=t==="rgb";const h=r?[o.red,o.green,o.blue]:[o.hue,o.saturation,o.value];const d=p(this.el);const u=l?n:n.slice(0,3);return s("calcite-tab",{class:a.control,key:t,selected:c},s("div",{class:a.channels,dir:"ltr"},u.map(((t,s)=>{const e=s===3;if(e){t=i&&!t?t:b(t)}return this.renderChannel(t,s,h[s],d,e?"%":"")}))))};this.renderChannel=(t,i,e,n,o)=>s("calcite-input",{class:a.channel,"data-channel-index":i,dir:n,key:i,label:e,lang:this.effectiveLocale,numberButtonType:"none",numberingSystem:this.numberingSystem,onCalciteInputChange:this.handleChannelChange,onCalciteInputInput:this.handleChannelInput,onKeyDown:this.handleKeyDown,scale:this.scale==="l"?"m":"s",style:{marginLeft:i>0&&!(this.scale==="s"&&this.alphaChannel&&i===3)?"-1px":""},suffixText:o,type:"number",value:t===null||t===void 0?void 0:t.toString()});this.deleteColor=()=>{const t=g(this.color,this.alphaChannel);const i=this.savedColors.indexOf(t)>-1;if(!i){return}const s=this.savedColors.filter((i=>i!==t));this.savedColors=s;const e=`${h}${this.storageId}`;if(this.storageId){localStorage.setItem(e,JSON.stringify(s))}};this.saveColor=()=>{const t=g(this.color,this.alphaChannel);const i=this.savedColors.indexOf(t)>-1;if(i){return}const s=[...this.savedColors,t];this.savedColors=s;const e=`${h}${this.storageId}`;if(this.storageId){localStorage.setItem(e,JSON.stringify(s))}};this.drawColorControls=E(((t="all")=>{if((t==="all"||t==="color-field")&&this.colorFieldRenderingContext){this.drawColorField()}if((t==="all"||t==="hue-slider")&&this.hueSliderRenderingContext){this.drawHueSlider()}if(this.alphaChannel&&(t==="all"||t==="opacity-slider")&&this.opacitySliderRenderingContext){this.drawOpacitySlider()}}),U);this.captureColorFieldColor=(t,i,s=true)=>{const{dimensions:{colorField:{height:e,width:n}}}=this;const a=Math.round(c.s/n*t);const o=Math.round(c.v/e*(e-i));this.internalColorSet(this.baseColorFieldColor.hsv().saturationv(a).value(o),s)};this.initColorField=t=>{this.colorFieldRenderingContext=t.getContext("2d");this.updateCanvasSize("color-field");this.drawColorControls()};this.initHueSlider=t=>{this.hueSliderRenderingContext=t.getContext("2d");this.updateCanvasSize("hue-slider");this.drawHueSlider()};this.initOpacitySlider=t=>{this.opacitySliderRenderingContext=t.getContext("2d");this.updateCanvasSize("opacity-slider");this.drawOpacitySlider()};this.storeOpacityScope=t=>{this.opacityScopeNode=t};this.handleOpacityScopeKeyDown=t=>{const i=t.shiftKey?10:1;const{key:s}=t;const e={ArrowUp:1,ArrowRight:1,ArrowDown:-1,ArrowLeft:-1};if(e[s]){t.preventDefault();const n=v(e[s]*i);this.captureHueSliderColor(this.opacityScopeLeft+n)}};this.allowEmpty=false;this.alphaChannel=false;this.channelsDisabled=false;this.color=o;this.disabled=false;this.format="auto";this.hideChannels=false;this.hexDisabled=false;this.hideHex=false;this.hideSaved=false;this.savedDisabled=false;this.scale="m";this.storageId=undefined;this.messageOverrides=undefined;this.numberingSystem=undefined;this.value=m(g(o,this.alphaChannel));this.defaultMessages=undefined;this.channelMode="rgb";this.channels=this.toChannels(o);this.dimensions=l.m;this.effectiveLocale="";this.messages=undefined;this.savedColors=[];this.colorFieldScopeTop=undefined;this.colorFieldScopeLeft=undefined;this.hueScopeLeft=undefined;this.opacityScopeLeft=undefined;this.scopeOrientation=undefined}handleAlphaChannelChange(t){const{format:i}=this;if(t&&i!=="auto"&&!w(i)){console.warn(`ignoring alphaChannel as the current format (${i}) does not support alpha`);this.alphaChannel=false}}handleColorChange(t,i){this.drawColorControls();this.updateChannelsFromColor(t);this.previousColor=i}handleFormatChange(t){this.setMode(t);this.internalColorSet(this.color,false,"internal")}handleScaleChange(t="m"){this.updateDimensions(t);this.updateCanvasSize("all");this.drawColorControls()}onMessagesChange(){}handleValueChange(t,i){const{allowEmpty:s,format:e}=this;const a=!s||t;let o=false;if(a){const s=x(t);if(!s||e!=="auto"&&s!==e){this.showIncompatibleColorWarning(t,e);this.value=i;return}o=this.mode!==s;this.setMode(s,this.internalColorUpdateContext===null)}const l=this.activeCanvasInfo;if(this.internalColorUpdateContext==="initial"){return}if(this.internalColorUpdateContext==="user-interaction"){this.calciteColorPickerInput.emit();if(!l){this.calciteColorPickerChange.emit()}return}const c=s&&!t?null:n(t!=null&&typeof t==="object"&&w(this.mode)?S(t):t);const r=!y(c,this.color);if(o||r){this.internalColorSet(c,this.alphaChannel&&!(this.mode.endsWith("a")||this.mode.endsWith("a-css")),"internal")}}get baseColorFieldColor(){return this.color||this.previousColor||o}effectiveLocaleChange(){M(this,this.effectiveLocale)}handleChannelKeyUpOrDown(t){this.shiftKeyChannelAdjustment=0;const{key:i}=t;if(i!=="ArrowUp"&&i!=="ArrowDown"||!t.composedPath().some((t=>{var i;return(i=t.classList)===null||i===void 0?void 0:i.contains(a.channel)}))){return}const{shiftKey:s}=t;t.preventDefault();if(!this.color){this.internalColorSet(this.previousColor);t.stopPropagation();return}const e=9;this.shiftKeyChannelAdjustment=i==="ArrowUp"&&s?e:i==="ArrowDown"&&s?-e:0}async setFocus(){await j(this);this.el.focus()}async componentWillLoad(){z(this);const{allowEmpty:t,color:i,format:s,value:e}=this;const a=t&&!e;const o=x(e);const l=a||s==="auto"&&o||s===o;const c=a?null:l?n(e):i;if(!l){this.showIncompatibleColorWarning(e,s)}this.setMode(s,false);this.internalColorSet(c,false,"initial");this.updateDimensions(this.scale);const r=`${h}${this.storageId}`;if(this.storageId&&localStorage.getItem(r)){this.savedColors=JSON.parse(localStorage.getItem(r))}await I(this)}connectedCallback(){_(this);K(this)}componentDidLoad(){F(this)}disconnectedCallback(){document.removeEventListener("pointermove",this.globalPointerMoveHandler);document.removeEventListener("pointerup",this.globalPointerUpHandler);L(this);P(this)}componentDidRender(){A(this)}render(){const{allowEmpty:t,channelsDisabled:i,color:e,colorFieldScopeLeft:n,colorFieldScopeTop:l,dimensions:{colorField:{width:h},slider:{width:d},thumb:{radius:u}},hexDisabled:p,hideChannels:f,hideHex:m,hideSaved:v,hueScopeLeft:w,messages:x,alphaChannel:y,opacityScopeLeft:C,savedColors:k,savedDisabled:D,scale:S,scopeOrientation:A}=this;const $=e?g(e,y):null;const j=u;const z=w!==null&&w!==void 0?w:d*o.hue()/c.h;const F=u;const _=C!==null&&C!==void 0?C:h*b(o.alpha())/r.max;const L=e===null;const O=A==="vertical";const M=p||m;const I=i||f;const K=D||v;return s("div",{class:a.container},s("div",{class:a.controlAndScope},s("canvas",{class:a.colorField,onPointerDown:this.handleColorFieldPointerDown,ref:this.initColorField}),s("div",{"aria-label":O?x.value:x.saturation,"aria-valuemax":O?c.v:c.s,"aria-valuemin":"0","aria-valuenow":(O?e===null||e===void 0?void 0:e.saturationv():e===null||e===void 0?void 0:e.value())||"0",class:{[a.scope]:true,[a.colorFieldScope]:true},onKeyDown:this.handleColorFieldScopeKeyDown,role:"slider",style:{top:`${l||0}px`,left:`${n||0}px`},tabindex:"0",ref:this.storeColorFieldScope})),s("div",{class:a.previewAndSliders},s("calcite-color-picker-swatch",{class:a.preview,color:$,scale:"l"}),s("div",{class:a.sliders},s("div",{class:a.controlAndScope},s("canvas",{class:{[a.slider]:true,[a.hueSlider]:true},onPointerDown:this.handleHueSliderPointerDown,ref:this.initHueSlider}),s("div",{"aria-label":x.hue,"aria-valuemax":c.h,"aria-valuemin":"0","aria-valuenow":(e===null||e===void 0?void 0:e.round().hue())||o.round().hue(),class:{[a.scope]:true,[a.hueScope]:true},onKeyDown:this.handleHueScopeKeyDown,role:"slider",style:{top:`${j}px`,left:`${z}px`},tabindex:"0",ref:this.storeHueScope})),y?s("div",{class:a.controlAndScope},s("canvas",{class:{[a.slider]:true,[a.opacitySlider]:true},onPointerDown:this.handleOpacitySliderPointerDown,ref:this.initOpacitySlider}),s("div",{"aria-label":x.opacity,"aria-valuemax":r.max,"aria-valuemin":r.min,"aria-valuenow":(e||o).round().alpha(),class:{[a.scope]:true,[a.opacityScope]:true},onKeyDown:this.handleOpacityScopeKeyDown,role:"slider",style:{top:`${F}px`,left:`${_}px`},tabindex:"0",ref:this.storeOpacityScope})):null)),M&&I?null:s("div",{class:{[a.controlSection]:true,[a.section]:true}},s("div",{class:a.hexAndChannelsGroup},M?null:s("div",{class:a.hexOptions},s("calcite-color-picker-hex-input",{allowEmpty:t,alphaChannel:y,class:a.control,messages:x,numberingSystem:this.numberingSystem,onCalciteColorPickerHexInputChange:this.handleHexInputChange,scale:S,value:$})),I?null:s("calcite-tabs",{class:{[a.colorModeContainer]:true,[a.splitSection]:true},scale:S==="l"?"m":"s"},s("calcite-tab-nav",{slot:"title-group"},this.renderChannelsTabTitle("rgb"),this.renderChannelsTabTitle("hsv")),this.renderChannelsTab("rgb"),this.renderChannelsTab("hsv")))),K?null:s("div",{class:{[a.savedColorsSection]:true,[a.section]:true}},s("div",{class:a.header},s("label",null,x.saved),s("div",{class:a.savedColorsButtons},s("calcite-button",{appearance:"transparent",class:a.deleteColor,disabled:L,iconStart:"minus",kind:"neutral",label:x.deleteColor,onClick:this.deleteColor,scale:S,type:"button"}),s("calcite-button",{appearance:"transparent",class:a.saveColor,disabled:L,iconStart:"plus",kind:"neutral",label:x.saveColor,onClick:this.saveColor,scale:S,type:"button"}))),k.length>0?s("div",{class:a.savedColors},[...k.map((t=>s("calcite-color-picker-swatch",{class:a.savedColor,color:t,key:t,onClick:this.handleSavedColorSelect,onKeyDown:this.handleSavedColorKeyDown,scale:S,tabIndex:0})))]):null))}handleKeyDown(t){if(t.key==="Enter"){t.preventDefault()}}showIncompatibleColorWarning(t,i){console.warn(`ignoring color value (${t}) as it is not compatible with the current format (${i})`)}setMode(t,i=true){const s=t==="auto"?this.mode:t;this.mode=this.ensureCompatibleMode(s,i)}ensureCompatibleMode(t,i){const{alphaChannel:s}=this;const e=w(t);if(s&&!e){const s=D(t);if(i){console.warn(`setting format to (${s}) as the provided one (${t}) does not support alpha`)}return s}if(!s&&e){const s=C(t);if(i){console.warn(`setting format to (${s}) as the provided one (${t}) does not support alpha`)}return s}return t}captureHueSliderColor(t){const{dimensions:{slider:{width:i}}}=this;const s=360/i*t;this.internalColorSet(this.baseColorFieldColor.hue(s),false)}captureOpacitySliderValue(t){const{dimensions:{slider:{width:i}}}=this;const s=v(r.max/i*t);this.internalColorSet(this.baseColorFieldColor.alpha(s),false)}internalColorSet(t,i=true,s="user-interaction"){if(i&&y(t,this.color)){return}this.internalColorUpdateContext=s;this.color=t;this.value=this.toValue(t);this.internalColorUpdateContext=null}toValue(t,i=this.mode){if(!t){return null}const s="hex";if(i.includes(s)){const s=i===f.HEXA;return m(g(t.round(),s),s)}if(i.includes("-css")){const s=t[i.replace("-css","").replace("a","")]().round().string();const e=(i.endsWith("a")||i.endsWith("a-css"))&&t.alpha()===1;if(e){const i=s.slice(0,3);const e=s.slice(4,-1);return`${i}a(${e}, ${t.alpha()})`}return s}const e=t[C(i)]().round().object();if(i.endsWith("a")){return k(e)}return e}getSliderCapSpacing(){const{dimensions:{slider:{height:t},thumb:{radius:i}}}=this;return i*2-t}updateDimensions(t="m"){this.dimensions=l[t]}drawColorField(){const t=this.colorFieldRenderingContext;const{dimensions:{colorField:{height:i,width:s}}}=this;t.fillStyle=this.baseColorFieldColor.hsv().saturationv(100).value(100).alpha(1).string();t.fillRect(0,0,s,i);const e=t.createLinearGradient(0,0,s,0);e.addColorStop(0,"rgba(255,255,255,1)");e.addColorStop(1,"rgba(255,255,255,0)");t.fillStyle=e;t.fillRect(0,0,s,i);const n=t.createLinearGradient(0,0,0,i);n.addColorStop(0,"rgba(0,0,0,0)");n.addColorStop(1,"rgba(0,0,0,1)");t.fillStyle=n;t.fillRect(0,0,s,i);this.drawActiveColorFieldColor()}setCanvasContextSize(t,{height:i,width:s}){if(!t){return}const e=window.devicePixelRatio||1;t.width=s*e;t.height=i*e;t.style.height=`${i}px`;t.style.width=`${s}px`;const n=t.getContext("2d");n.scale(e,e)}updateCanvasSize(t="all"){var i,s,e;const{dimensions:n}=this;if(t==="all"||t==="color-field"){this.setCanvasContextSize((i=this.colorFieldRenderingContext)===null||i===void 0?void 0:i.canvas,n.colorField)}const a={width:n.slider.width,height:n.slider.height+(n.thumb.radius-n.slider.height/2)*2};if(t==="all"||t==="hue-slider"){this.setCanvasContextSize((s=this.hueSliderRenderingContext)===null||s===void 0?void 0:s.canvas,a)}if(t==="all"||t==="opacity-slider"){this.setCanvasContextSize((e=this.opacitySliderRenderingContext)===null||e===void 0?void 0:e.canvas,a)}}drawActiveColorFieldColor(){const{color:t}=this;if(!t){return}const i=t.hsv();const{dimensions:{colorField:{height:s,width:e},thumb:{radius:n}}}=this;const a=i.saturationv()/(c.s/e);const o=s-i.value()/(c.v/s);requestAnimationFrame((()=>{this.colorFieldScopeLeft=a;this.colorFieldScopeTop=o}));this.drawThumb(this.colorFieldRenderingContext,n,a,o,i)}drawThumb(t,i,s,e,n){const a=0;const o=2*Math.PI;const l=1;i=i-l;t.beginPath();t.arc(s,e,i,a,o);t.fillStyle="#fff";t.fill();t.strokeStyle="rgba(0,0,0,0.3)";t.lineWidth=l;t.stroke();t.beginPath();t.arc(s,e,i-3,a,o);t.fillStyle=n.rgb().alpha(1).string();t.fill()}drawActiveHueSliderColor(){const{color:t}=this;if(!t){return}const i=t.hsv().saturationv(100).value(100);const{dimensions:{slider:{height:s,width:e},thumb:{radius:n}}}=this;const a=i.hue()/(360/e);const o=n-s/2+s/2;requestAnimationFrame((()=>{this.hueScopeLeft=a}));this.drawThumb(this.hueSliderRenderingContext,n,a,o,i)}drawHueSlider(){const t=this.hueSliderRenderingContext;const{dimensions:{slider:{height:i,width:s},thumb:{radius:e}}}=this;const a=0;const o=e-i/2;const l=t.createLinearGradient(0,0,s,0);const c=["red","yellow","lime","cyan","blue","magenta","red"];const r=1/(c.length-1);let h=0;c.forEach((t=>{l.addColorStop(h,n(t).string());h+=r}));t.clearRect(0,0,s,i+this.getSliderCapSpacing()*2);this.drawSliderPath(t,i,s,a,o);t.fillStyle=l;t.fill();t.strokeStyle="rgba(0,0,0,0.3)";t.lineWidth=1;t.stroke();this.drawActiveHueSliderColor()}drawOpacitySlider(){const t=this.opacitySliderRenderingContext;const{baseColorFieldColor:i,dimensions:{slider:{height:s,width:e},thumb:{radius:n}}}=this;const a=0;const o=n-s/2;t.clearRect(0,0,e,s+this.getSliderCapSpacing()*2);const l=t.createLinearGradient(0,o,e,0);const c=i.rgb().alpha(0);const r=i.rgb().alpha(.5);const h=i.rgb().alpha(1);l.addColorStop(0,c.string());l.addColorStop(.5,r.string());l.addColorStop(1,h.string());this.drawSliderPath(t,s,e,a,o);const d=t.createPattern(this.getCheckeredBackgroundPattern(),"repeat");t.fillStyle=d;t.fill();t.fillStyle=l;t.fill();t.strokeStyle="rgba(0,0,0,0.3)";t.lineWidth=1;t.stroke();this.drawActiveOpacitySliderColor()}drawSliderPath(t,i,s,e,n){const a=i/2+1;t.beginPath();t.moveTo(e+a,n);t.lineTo(e+s-a,n);t.quadraticCurveTo(e+s,n,e+s,n+a);t.lineTo(e+s,n+i-a);t.quadraticCurveTo(e+s,n+i,e+s-a,n+i);t.lineTo(e+a,n+i);t.quadraticCurveTo(e,n+i,e,n+i-a);t.lineTo(e,n+a);t.quadraticCurveTo(e,n,e+a,n);t.closePath()}getCheckeredBackgroundPattern(){if(this.checkerPattern){return this.checkerPattern}const t=document.createElement("canvas");t.width=10;t.height=10;const i=t.getContext("2d");i.fillStyle="#ccc";i.fillRect(0,0,10,10);i.fillStyle="#fff";i.fillRect(0,0,5,5);i.fillRect(5,5,5,5);this.checkerPattern=t;return t}drawActiveOpacitySliderColor(){const{color:t}=this;if(!t){return}const i=t;const{dimensions:{slider:{width:s},thumb:{radius:e}}}=this;const n=b(i.alpha())/(r.max/s);const a=e;requestAnimationFrame((()=>{this.opacityScopeLeft=n}));this.drawThumb(this.opacitySliderRenderingContext,e,n,a,i)}updateColorFromChannels(t){this.internalColorSet(n(t,this.channelMode))}updateChannelsFromColor(t){this.channels=t?this.toChannels(t):[null,null,null,null]}toChannels(t){const{channelMode:i}=this;const s=t[i]().array().map(((t,i)=>{const s=i===3;return s?t:Math.floor(t)}));if(s.length===3){s.push(1)}return s}static get delegatesFocus(){return true}static get assetsDirs(){return["assets"]}get el(){return e(this)}static get watchers(){return{alphaChannel:["handleAlphaChannelChange"],color:["handleColorChange"],format:["handleFormatChange"],scale:["handleScaleChange"],messageOverrides:["onMessagesChange"],value:["handleValueChange"],effectiveLocale:["effectiveLocaleChange"]}}};H.style=N;export{H as calcite_color_picker};
//# sourceMappingURL=p-62952373.entry.js.map